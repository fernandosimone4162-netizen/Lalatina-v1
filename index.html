<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lalatina â€“ Fase 1</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: url("background.png") no-repeat center center fixed;
  background-size: cover;
  color: #fff;
}

#app {
  max-width: 420px;
  margin: auto;
  margin-top: 40px;
  background: rgba(0,0,0,0.75);
  border-radius: 16px;
  padding: 20px;
}

h2 {
  text-align: center;
  margin-bottom: 10px;
}

#phrase {
  text-align: center;
  font-size: 22px;
  margin: 15px 0;
}

input {
  width: 100%;
  padding: 12px;
  font-size: 18px;
  border-radius: 10px;
  border: none;
  margin-bottom: 10px;
}

button {
  width: 100%;
  padding: 14px;
  margin-top: 8px;
  font-size: 16px;
  border-radius: 12px;
  border: none;
  background: #000;
  color: #fff;
}

button:disabled {
  opacity: 0.5;
}

#info {
  text-align: center;
  font-size: 14px;
  margin-top: 10px;
}
</style>
</head>

<body>
<div id="app">
  <h2 id="phase">Phase 1</h2>

  <div id="instruction">Translate what you hear</div>

  <div id="phrase"></div>

  <input id="answer" placeholder="Type here">

  <button onclick="listen()">ðŸ”Š Listen</button>
  <button onclick="submitAnswer()">Submit</button>
  <button onclick="skipQuestion()" id="skipBtn" style="display:none">Skip</button>
  <button onclick="retry()" id="retryBtn" style="display:none">Try again</button>

  <div id="info"></div>
</div>

<script>
// ===== IDIOMAS =====
const lang = {
  pt: {
    phase: "Fase 1",
    instruction: "Traduza o que vocÃª ouvir",
    submit: "Enviar",
    skip: "Pular",
    retry: "Tentar novamente"
  },
  en: {
    phase: "Phase 1",
    instruction: "Translate what you hear",
    submit: "Submit",
    skip: "Skip",
    retry: "Try again"
  }
};

let currentLang = "en";

// ===== BANCO DE FRASES REAIS =====
const questions = [
  { en: "Thank you", pt: "Obrigado" },
  { en: "Good morning", pt: "Bom dia" },
  { en: "How are you?", pt: "Como vocÃª estÃ¡?" },
  { en: "I am ready", pt: "Eu estou pronto" },
  { en: "I am happy", pt: "Eu estou feliz" }
  // aqui entram centenas
];

// ===== ESTADO =====
let index = 0;
let attempts = 0;
let errors = {};
let answered = 0;

// ===== INIT =====
updateUI();
loadQuestion();

function updateUI() {
  document.getElementById("phase").innerText = lang[currentLang].phase;
  document.getElementById("instruction").innerText = lang[currentLang].instruction;
}

function loadQuestion() {
  document.getElementById("phrase").innerText = questions[index].en;
  document.getElementById("answer").value = "";
  attempts = 0;
  document.getElementById("skipBtn").style.display = "none";
  document.getElementById("retryBtn").style.display = "none";
}

function listen() {
  const msg = new SpeechSynthesisUtterance(questions[index].en);
  msg.lang = "en-US";
  speechSynthesis.speak(msg);
}

function submitAnswer() {
  const user = document.getElementById("answer").value.trim().toLowerCase();
  const correct = questions[index].pt.toLowerCase();

  if (user === correct) {
    answered++;
    index = (index + 1) % questions.length;
    loadQuestion();
  } else {
    attempts++;
    errors[index] = (errors[index] || 0) + 1;
    document.getElementById("retryBtn").style.display = "block";
    if (attempts >= 3) {
      document.getElementById("skipBtn").style.display = "block";
    }
  }
}

function retry() {
  document.getElementById("answer").value = "";
}

function skipQuestion() {
  index = (index + 1) % questions.length;
  loadQuestion();
}
</script>
</body>
</html>
