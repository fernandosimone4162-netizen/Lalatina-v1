<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>LALATINA – Fase 1</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, #6a00ff, #9b00ff);
  color: white;
}

.container {
  max-width: 420px;
  margin: auto;
  padding: 20px;
}

.card {
  background: rgba(0,0,0,0.35);
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 0 20px rgba(0,0,0,0.4);
}

h1, h2 {
  text-align: center;
}

button {
  width: 100%;
  padding: 14px;
  margin-top: 10px;
  border: none;
  border-radius: 8px;
  background: #00ffcc;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
}

button:hover {
  background: #00ddb3;
}

input {
  width: 100%;
  padding: 12px;
  border-radius: 6px;
  border: none;
  margin-top: 10px;
}

.option {
  background: rgba(255,255,255,0.1);
  padding: 12px;
  border-radius: 8px;
  margin-top: 10px;
  cursor: pointer;
}

.option:hover {
  background: rgba(255,255,255,0.25);
}

.correct {
  background: #00c853 !important;
}

.wrong {
  background: #d50000 !important;
}

.hidden {
  display: none;
}
</style>
</head>

<body>

<div class="container">

<!-- LOGIN -->
<div class="card" id="login">
<h1>LALATINA</h1>
<input id="name" placeholder="Seu nome">
<button onclick="start()">Entrar</button>
</div>

<!-- TREINO -->
<div class="card hidden" id="train">
<h2 id="question"></h2>
<div id="options"></div>
<p id="progress"></p>
</div>

<!-- PROVA -->
<div class="card hidden" id="exam">
<h2 id="examQuestion"></h2>
<div id="examOptions"></div>
<p id="examProgress"></p>
</div>

<!-- FINAL -->
<div class="card hidden" id="end">
<h1 id="result"></h1>
<button onclick="location.reload()">Recomeçar</button>
</div>

</div>

<script>
let user = "";
let totalAnswered = 0;
let correctAnswers = 0;
let allowExam = false;

let examAnswered = 0;
let examCorrect = 0;

const questions = [];
for (let i = 1; i <= 500; i++) {
  questions.push({
    q: i <= 100 ? "Escolha a tradução correta de: I am"
               : i <= 300 ? "Qual forma correta do verbo to be para: You ___ happy"
               : "Complete corretamente: They ___ studying",
    options: i <= 100
      ? ["Eu sou", "Eu fui", "Eu tenho"]
      : i <= 300
      ? ["is", "are", "am"]
      : ["is", "are", "am"],
    answer: i <= 100 ? 0 : i <= 300 ? 1 : 1
  });
}

function start() {
  user = document.getElementById("name").value.trim();
  if (!user) return;
  document.getElementById("login").classList.add("hidden");
  document.getElementById("train").classList.remove("hidden");
  nextTrain();
}

function nextTrain() {
  if (totalAnswered >= 100 && correctAnswers / totalAnswered >= 0.7) {
    allowExam = true;
  }

  if (allowExam && totalAnswered >= Math.min(500, 100 + Math.floor(Math.random() * 200))) {
    document.getElementById("train").classList.add("hidden");
    document.getElementById("exam").classList.remove("hidden");
    nextExam();
    return;
  }

  const q = questions[totalAnswered];
  document.getElementById("question").innerText = q.q;
  const optDiv = document.getElementById("options");
  optDiv.innerHTML = "";

  q.options.forEach((opt, i) => {
    const d = document.createElement("div");
    d.className = "option";
    d.innerText = opt;
    d.onclick = () => {
      totalAnswered++;
      if (i === q.answer) correctAnswers++;
      nextTrain();
    };
    optDiv.appendChild(d);
  });

  document.getElementById("progress").innerText =
    `Respondidas: ${totalAnswered} | Acertos: ${correctAnswers}`;
}

function nextExam() {
  if (examAnswered === 20) {
    document.getElementById("exam").classList.add("hidden");
    document.getElementById("end").classList.remove("hidden");
    document.getElementById("result").innerText =
      examCorrect >= 16
      ? "Parabéns! Fase 1 concluída."
      : "Você não passou. Tente novamente.";
    return;
  }

  const q = questions[examAnswered + 200];
  document.getElementById("examQuestion").innerText = q.q;
  const optDiv = document.getElementById("examOptions");
  optDiv.innerHTML = "";

  q.options.forEach((opt, i) => {
    const d = document.createElement("div");
    d.className = "option";
    d.innerText = opt;
    d.onclick = () => {
      examAnswered++;
      if (i === q.answer) examCorrect++;
      nextExam();
    };
    optDiv.appendChild(d);
  });

  document.getElementById("examProgress").innerText =
    `Questão ${examAnswered + 1} de 20`;
}
</script>

</body>
</html>
