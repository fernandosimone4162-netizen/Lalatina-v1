<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>La Latina</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(180deg,#020617,#0f172a);
  color: #fff;
}

.app {
  max-width: 420px;
  margin: auto;
  padding: 20px;
}

.card {
  background: #020617;
  border-radius: 16px;
  padding: 20px;
  margin-top: 40px;
  box-shadow: 0 0 20px rgba(0,0,0,.5);
}

h1,h2,p {
  text-align: center;
}

button {
  width: 100%;
  padding: 14px;
  margin-top: 16px;
  border: none;
  border-radius: 10px;
  background: #2563eb;
  color: #fff;
  font-size: 16px;
}

input {
  width: 100%;
  padding: 14px;
  margin-top: 16px;
  border-radius: 10px;
  border: none;
  font-size: 16px;
}

.feedback {
  margin-top: 16px;
  text-align: center;
}

.correct {
  color: #22c55e;
  font-weight: bold;
}

.wrong {
  color: #ef4444;
}

.translation {
  margin-top: 12px;
  font-size: 16px;
  line-height: 1.4;
}
</style>
</head>

<body>
<div class="app" id="app"></div>

<script>
// =====================
// BANCO DE PERGUNTAS
// =====================
function gerarBancoFase1() {
  const sujeitos = ["I", "You", "He", "She", "We", "They"];
  const complementos = ["very good", "happy", "ready", "tired", "here"];
  let banco = [];

  for (let i = 0; i < 10000; i++) {
    let s = sujeitos[i % sujeitos.length];
    let c = complementos[i % complementos.length];
    banco.push({
      pergunta: `${s} ___ ${c}`,
      resposta: `${s} am ${c}`.replace("You am","You are").replace("He am","He is")
                              .replace("She am","She is").replace("We am","We are")
                              .replace("They am","They are"),
      traducao: "Frase usando o verbo ser/estar"
    });
  }
  return banco;
}

function gerarBancoFase2() {
  const sujeitos = ["I", "You", "He", "She", "We", "They"];
  const complementos = ["happy", "ready", "here"];
  let banco = [];

  for (let i = 0; i < 10000; i++) {
    let s = sujeitos[i % sujeitos.length];
    let c = complementos[i % complementos.length];
    banco.push({
      pergunta: `${s} ___ not ${c}`,
      resposta: `${s} am not ${c}`.replace("You am","You are").replace("He am","He is")
                                 .replace("She am","She is").replace("We am","We are")
                                 .replace("They am","They are"),
      traducao: "Forma negativa do verbo to be"
    });
  }
  return banco;
}

const fases = [
  { nome: "Fase 1", explicacao: "O verbo to be significa ser ou estar.", banco: gerarBancoFase1() },
  { nome: "Fase 2", explicacao: "Forma negativa do verbo to be.", banco: gerarBancoFase2() }
];

// =====================
// ESTADO
// =====================
let faseAtual = 0;
let acertos = 0;
let erros = 0;
let perguntaAtual = null;

// =====================
// FUN√á√ïES
// =====================
function falar(texto) {
  const u = new SpeechSynthesisUtterance(texto);
  u.lang = "en-US";
  speechSynthesis.speak(u);
}

function novaPergunta() {
  erros = 0;
  perguntaAtual = fases[faseAtual].banco[Math.floor(Math.random() * fases[faseAtual].banco.length)];
  renderPergunta();
}

function verificar(resposta) {
  if (resposta.trim().toLowerCase() === perguntaAtual.resposta.toLowerCase()) {
    acertos++;
    falar(perguntaAtual.resposta);

    app.innerHTML = `
      <div class="card">
        <h2 class="correct">‚úî Correto!</h2>
        <div class="translation">
          <strong>${perguntaAtual.resposta}</strong><br>
          ${perguntaAtual.traducao}
        </div>
        <button onclick="proximo()">Pr√≥xima</button>
      </div>
    `;
  } else {
    erros++;
    if (erros >= 3) {
      app.querySelector(".feedback").innerHTML = `
        <div class="wrong">‚ùå Resposta correta:</div>
        <div class="translation">
          <strong>${perguntaAtual.resposta}</strong><br>
          ${perguntaAtual.traducao}
        </div>
      `;
    } else {
      app.querySelector(".feedback").innerHTML =
        `<div class="wrong">Tente novamente (${erros}/3)</div>`;
    }
  }
}

function proximo() {
  if (acertos >= 300) {
    if (faseAtual + 1 < fases.length) {
      telaConclusao();
    } else {
      app.innerHTML = `<div class="card"><h2>üéâ Curso conclu√≠do!</h2></div>`;
    }
  } else {
    novaPergunta();
  }
}

// =====================
// TELAS
// =====================
function telaInicial() {
  app.innerHTML = `
    <div class="card">
      <h1>La Latina</h1>
      <h2>${fases[faseAtual].nome}</h2>
      <p>${fases[faseAtual].explicacao}</p>
      <button onclick="novaPergunta()">Come√ßar</button>
    </div>
  `;
}

function renderPergunta() {
  app.innerHTML = `
    <div class="card">
      <h2>${perguntaAtual.pergunta}</h2>
      <input id="resp" placeholder="Digite a frase completa">
      <button onclick="verificar(document.getElementById('resp').value)">Confirmar</button>
      <div class="feedback"></div>
      <p style="margin-top:12px;">Acertos: ${acertos}/300</p>
    </div>
  `;
}

function telaConclusao() {
  app.innerHTML = `
    <div class="card">
      <h2>üéâ Parab√©ns!</h2>
      <p>Voc√™ concluiu a ${fases[faseAtual].nome}.</p>
      <button onclick="faseAtual++; acertos=0; telaInicial()">Pr√≥xima fase</button>
    </div>
  `;
}

// =====================
telaInicial();
</script>
</body>
</html>
