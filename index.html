<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>LALATINA</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin:0;
  font-family: Arial, sans-serif;
  background: linear-gradient(180deg,#6d28d9,#4c1d95);
  color:#fff;
}

.app {
  max-width:420px;
  margin:auto;
  padding:20px;
}

.card {
  background:#2e1065;
  border-radius:16px;
  padding:20px;
  margin-top:40px;
  box-shadow:0 0 25px rgba(0,0,0,.5);
}

h1,h2,p {
  text-align:center;
}

button {
  width:100%;
  padding:14px;
  margin-top:12px;
  border:none;
  border-radius:10px;
  background:#a78bfa;
  color:#1e1b4b;
  font-size:16px;
  font-weight:bold;
}

input {
  width:100%;
  padding:14px;
  margin-top:12px;
  border-radius:10px;
  border:none;
  font-size:16px;
}

.menu {
  position:absolute;
  top:15px;
  left:15px;
  font-size:24px;
  cursor:pointer;
}

.feedback {
  margin-top:12px;
  text-align:center;
}

.correct { color:#4ade80; font-weight:bold; }
.wrong { color:#f87171; }

.small { font-size:14px; opacity:.85; }

</style>
</head>

<body>
<div class="menu" onclick="abrirMenu()">‚ãÆ</div>
<div class="app" id="app"></div>

<script>
/* =====================
   ESTADO GLOBAL
===================== */
let usuario = null;
let indicePergunta = 0;
let erros = 0;
let acertos = 0;
let perguntasRespondidas = 0;
let podeProva = false;
let emProva = false;
let tentativaProva = 0;

const MAX_PERGUNTAS = Math.floor(Math.random()*401)+100;

/* =====================
   BANCO FASE 1
===================== */
const banco = [];

const base = [
 ["Good morning","Bom dia"],
 ["Good afternoon","Boa tarde"],
 ["Good evening","Boa noite"],
 ["Hello","Ol√°"],
 ["Hi","Oi"],
 ["How are you?","Como voc√™ est√°?"],
 ["I am fine","Eu estou bem"],
 ["Thank you","Obrigado"],
 ["You are welcome","De nada"],
 ["See you later","At√© mais"]
];

for(let i=0;i<MAX_PERGUNTAS;i++){
 let b = base[i % base.length];
 banco.push({
   en: b[0],
   pt: b[1]
 });
}

/* =====================
   VOZ
===================== */
function falar(txt){
 const u = new SpeechSynthesisUtterance(txt);
 u.lang="en-US";
 speechSynthesis.speak(u);
}

function ouvir(){
 const rec = new webkitSpeechRecognition();
 rec.lang="pt-BR";
 rec.start();
 rec.onresult=e=>{
   document.getElementById("resp").value = e.results[0][0].transcript;
 };
}

/* =====================
   TELAS
===================== */
function telaLogin(){
 app.innerHTML=`
 <div class="card">
   <h1>LALATINA</h1>
   <p>Entre com sua conta Google</p>
   <button onclick="login()">Entrar com Google</button>
 </div>`;
}

function login(){
 usuario={email:"usuario@teste.com"};
 telaBoasVindas();
}

function telaBoasVindas(){
 app.innerHTML=`
 <div class="card">
   <h2>Ol√°, bem-vindo √† Latina</h2>
   <p>Desde que tenha empenho no aprendizado, ter√° uma boa experi√™ncia.</p>
   <button onclick="novaPergunta()">Come√ßar</button>
 </div>`;
}

function abrirMenu(){
 app.innerHTML=`
 <div class="card">
   <h2>Menu</h2>
   <button onclick="verboToBe()">Verbo To Be</button>
   <button onclick="novaPergunta()">Voltar</button>
 </div>`;
}

function verboToBe(){
 app.innerHTML=`
 <div class="card">
 <h2>Verbo TO BE</h2>
 <p>
 O verbo <b>to be</b> significa <b>ser</b> ou <b>estar</b>.<br><br>
 I am = Eu sou / estou<br>
 You are = Voc√™ √© / est√°<br>
 He is / She is = Ele / Ela √© / est√°<br><br>
 Usamos para falar de estado, identidade e situa√ß√£o.
 </p>
 <button onclick="novaPergunta()">Voltar</button>
 </div>`;
}

/* =====================
   PERGUNTAS
===================== */
function novaPergunta(){
 if(perguntasRespondidas>=MAX_PERGUNTAS){
   podeProva=true;
   telaProva();
   return;
 }
 erros=0;
 const q = banco[indicePergunta % banco.length];
 falar(q.en);
 app.innerHTML=`
 <div class="card">
 <h2>${q.en}</h2>
 <input id="resp" placeholder="Traduza">
 <button onclick="ouvir()">üé§ Falar</button>
 <button onclick="verificar()">Confirmar</button>
 <div class="feedback"></div>
 <p class="small">Pergunta ${perguntasRespondidas+1}/${MAX_PERGUNTAS}</p>
 </div>`;
}

function normalizar(t){
 return t.trim().toLowerCase();
}

function verificar(){
 const q = banco[indicePergunta % banco.length];
 const r = normalizar(document.getElementById("resp").value);
 const c = normalizar(q.pt);

 if(r===c){
   acertos++;
   perguntasRespondidas++;
   indicePergunta++;
   app.querySelector(".feedback").innerHTML=`<div class="correct">‚úî Correto</div>`;
   setTimeout(novaPergunta,800);
 } else {
   erros++;
   if(erros===4){
     app.querySelector(".feedback").innerHTML=`<div class="wrong">Dica: √© uma sauda√ß√£o comum</div>`;
   } else if(erros>=5){
     app.querySelector(".feedback").innerHTML=`
       <div class="wrong">Resposta correta: ${q.pt}</div>
       <button onclick="pular()">Pular</button>`;
   } else {
     app.querySelector(".feedback").innerHTML=`<div class="wrong">Tente novamente (${erros})</div>`;
   }
 }
}

function pular(){
 perguntasRespondidas++;
 indicePergunta++;
 novaPergunta();
}

/* =====================
   PROVA
===================== */
function telaProva(){
 emProva=true;
 tentativaProva++;
 acertos=0;
 indicePergunta=0;
 app.innerHTML=`
 <div class="card">
 <h2>Prova Final</h2>
 <p>30 quest√µes ‚Äî m√≠nimo 20 acertos</p>
 <button onclick="perguntaProva()">Come√ßar Prova</button>
 </div>`;
}

function perguntaProva(){
 if(indicePergunta>=30){
   if(acertos>=20){
     app.innerHTML=`<div class="card"><h2>üéâ Aprovado</h2></div>`;
   } else {
     if(tentativaProva<3){
       app.innerHTML=`<div class="card"><h2>Refor√ßo</h2><button onclick="novaPergunta()">Voltar</button></div>`;
     } else {
       perguntasRespondidas=Math.floor(MAX_PERGUNTAS*0.4);
       novaPergunta();
     }
   }
   return;
 }
 const q = banco[indicePergunta];
 app.innerHTML=`
 <div class="card">
 <h2>${q.en}</h2>
 <input id="resp">
 <button onclick="verificarProva()">Confirmar</button>
 </div>`;
}

function verificarProva(){
 const q = banco[indicePergunta];
 const r = normalizar(document.getElementById("resp").value);
 if(r===normalizar(q.pt)) acertos++;
 indicePergunta++;
 perguntaProva();
}

/* ===================== */
telaLogin();
</script>
</body>
</html>
