<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LALATINA</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(180deg,#020617,#0f172a);
  color: #fff;
}
.app {
  max-width: 420px;
  margin: auto;
  padding: 20px;
}
.card {
  background: #020617;
  border-radius: 16px;
  padding: 20px;
  margin-top: 40px;
  box-shadow: 0 0 20px rgba(0,0,0,.5);
}
h1,h2,p { text-align: center; }
button {
  width: 100%;
  padding: 14px;
  margin-top: 12px;
  border: none;
  border-radius: 10px;
  background: #1e293b;
  color: #fff;
  font-size: 16px;
}
button:hover { background: #2563eb; }
.primary { background: #2563eb; }
.feedback { margin-top: 12px; text-align: center; }
.correct { color: #22c55e; font-weight: bold; }
.wrong { color: #ef4444; }
.menu {
  position: fixed;
  top: 10px;
  left: 10px;
  font-size: 22px;
  cursor: pointer;
}
.hidden { display:none; }
</style>
</head>

<body>
<div class="menu" onclick="abrirMenu()">‚ãÆ</div>
<div class="app" id="app"></div>

<script>
/* =====================
   ESTADO GLOBAL
===================== */
let perguntasRespondidas = 0;
let dificuldade = 1;
let erros = 0;
let tentativas = 0;
let podeProva = false;
let provaTentativas = 0;

/* =====================
   BANCO DIN√ÇMICO
===================== */
function gerarPergunta() {
  const banco = [
    { en:"Good morning", pt:"Bom dia", d:1 },
    { en:"I am happy", pt:"Eu estou feliz", d:1 },
    { en:"You are here", pt:"Voc√™ est√° aqui", d:2 },
    { en:"She is tired", pt:"Ela est√° cansada", d:2 },
    { en:"They are ready", pt:"Eles est√£o prontos", d:3 },
    { en:"He is not here", pt:"Ele n√£o est√° aqui", d:3 },
    { en:"We are learning English", pt:"N√≥s estamos aprendendo ingl√™s", d:4 },
    { en:"She is very confident today", pt:"Ela est√° muito confiante hoje", d:4 },
    { en:"They are not afraid of mistakes", pt:"Eles n√£o t√™m medo de errar", d:5 },
    { en:"I am improving little by little", pt:"Eu estou melhorando aos poucos", d:5 }
  ];
  return banco.filter(q => q.d <= dificuldade + 1)
               [Math.floor(Math.random() * banco.length)];
}

/* =====================
   TELAS
===================== */
function telaLogin() {
  app.innerHTML = `
    <div class="card">
      <h1>LALATINA</h1>
      <p>Entre com sua conta</p>
      <button class="primary" onclick="telaBoasVindas()">Entrar com Google</button>
    </div>
  `;
}

function telaBoasVindas() {
  app.innerHTML = `
    <div class="card">
      <h2>üëã Ol√°, bem-vindo √† Latina</h2>
      <p>Garantimos que, com empenho, voc√™ ter√° uma √≥tima experi√™ncia.</p>
      <button class="primary" onclick="novaPergunta()">Come√ßar</button>
    </div>
  `;
}

let perguntaAtual = null;

function novaPergunta() {
  perguntaAtual = gerarPergunta();
  erros = 0;
  tentativas = 0;
  tocarAudio(perguntaAtual.en);
  renderPergunta(false);
}

function renderPergunta(mostrarTexto) {
  app.innerHTML = `
    <div class="card">
      <h2>${mostrarTexto ? perguntaAtual.en : "üîä Ou√ßa o √°udio"}</h2>
      <button onclick="responder(true)">Responder certo</button>
      <button onclick="responder(false)">Responder errado</button>
      <div class="feedback"></div>
      <p>${perguntasRespondidas}/500</p>
    </div>
  `;
}

function responder(certo) {
  tentativas++;
  if (certo) {
    perguntasRespondidas++;
    dificuldade += 0.1;
    if (perguntasRespondidas >= 100 && dificuldade >= 4) podeProva = true;
    if (perguntasRespondidas >= 500 || podeProva) return telaProva();
    novaPergunta();
  } else {
    erros++;
    dificuldade = Math.max(1, dificuldade - 0.2);
    if (tentativas === 3) renderPergunta(true);
    if (tentativas === 4) alert("Dica: pense no significado.");
    if (tentativas === 5) novaPergunta();
  }
}

/* =====================
   PROVA
===================== */
function telaProva() {
  let acertos = 0;
  let questao = 0;

  function proxima() {
    if (questao === 30) {
      if (acertos >= 20) {
        app.innerHTML = `
          <div class="card">
            <h2>üéâ Aprovado!</h2>
            <p>Voc√™ passou para a Fase 2.</p>
          </div>`;
      } else {
        provaTentativas++;
        if (provaTentativas >= 3) {
          perguntasRespondidas = Math.floor(perguntasRespondidas * 0.32);
          dificuldade = 2;
          novaPergunta();
        } else {
          telaProva();
        }
      }
      return;
    }
    const q = gerarPergunta();
    app.innerHTML = `
      <div class="card">
        <h2>${q.en}</h2>
        <button onclick="acertos++; questao++; proxima()">Certo</button>
        <button onclick="questao++; proxima()">Errado</button>
        <p>${questao+1}/30</p>
      </div>
    `;
  }
  proxima();
}

/* =====================
   MENU
===================== */
function abrirMenu() {
  alert("Menu:\n‚Ä¢ Verbo TO BE\n‚Ä¢ Bot (desbloqueia na fase 5)");
}

/* =====================
   √ÅUDIO
===================== */
function tocarAudio(texto) {
  const u = new SpeechSynthesisUtterance(texto);
  u.lang = "en-US";
  speechSynthesis.speak(u);
}

telaLogin();
</script>
</body>
</html>
