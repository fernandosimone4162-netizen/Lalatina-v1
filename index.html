<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>La Latina</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(180deg,#020617,#0f172a);
  color: #fff;
}

.app {
  max-width: 420px;
  margin: auto;
  padding: 20px;
}

.card {
  background: #020617;
  border-radius: 16px;
  padding: 20px;
  margin-top: 40px;
  box-shadow: 0 0 20px rgba(0,0,0,.5);
}

h1,h2,p {
  text-align: center;
}

button.option {
  width: 100%;
  padding: 14px;
  margin-top: 12px;
  border: none;
  border-radius: 10px;
  background: #1e293b;
  color: #fff;
  font-size: 16px;
}

button.option:hover {
  background: #2563eb;
}

button.primary {
  width: 100%;
  padding: 14px;
  margin-top: 16px;
  border: none;
  border-radius: 10px;
  background: #2563eb;
  color: #fff;
  font-size: 16px;
}

.feedback {
  margin-top: 16px;
  text-align: center;
}

.correct {
  color: #22c55e;
  font-weight: bold;
}

.wrong {
  color: #ef4444;
}

.translation {
  margin-top: 12px;
  font-size: 16px;
  line-height: 1.4;
}
</style>
</head>

<body>
<div class="app" id="app"></div>

<script>
/* =====================
   BANCO DE PERGUNTAS
===================== */
function gerarBancoFase1() {
  const niveis = [
    { s: "I", v: "am", c: "happy", t: "Eu estou feliz" },
    { s: "You", v: "are", c: "ready", t: "Voc√™ est√° pronto" },
    { s: "He", v: "is", c: "here", t: "Ele est√° aqui" },
    { s: "She", v: "is", c: "very good", t: "Ela est√° muito bem" }
  ];

  let banco = [];
  for (let i = 0; i < 10000; i++) {
    let n = niveis[i % niveis.length];
    banco.push({
      pergunta: `${n.s} ___ ${n.c}`,
      correta: `${n.v}`,
      frase: `${n.s} ${n.v} ${n.c}`,
      traducao: n.t,
      opcoes: embaralhar([n.v, "are", "is", "am"])
    });
  }
  return banco;
}

function gerarBancoFase2() {
  const niveis = [
    { s: "I", v: "am not", c: "happy", t: "Eu n√£o estou feliz" },
    { s: "You", v: "are not", c: "ready", t: "Voc√™ n√£o est√° pronto" },
    { s: "He", v: "is not", c: "here", t: "Ele n√£o est√° aqui" }
  ];

  let banco = [];
  for (let i = 0; i < 10000; i++) {
    let n = niveis[i % niveis.length];
    banco.push({
      pergunta: `${n.s} ___ ${n.c}`,
      correta: n.v,
      frase: `${n.s} ${n.v} ${n.c}`,
      traducao: n.t,
      opcoes: embaralhar([n.v, "am not", "are not", "is not"])
    });
  }
  return banco;
}

function embaralhar(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

const fases = [
  {
    nome: "Fase 1",
    explicacao: `
    <strong>Verbo TO BE</strong><br><br>
    O verbo <strong>to be</strong> significa <strong>ser</strong> ou <strong>estar</strong>.<br><br>

    ‚Ä¢ I ‚Üí am<br>
    ‚Ä¢ You ‚Üí are<br>
    ‚Ä¢ He / She / It ‚Üí is<br>
    ‚Ä¢ We ‚Üí are<br>
    ‚Ä¢ They ‚Üí are<br><br>

    Exemplo:<br>
    I am happy ‚Üí Eu estou feliz
    `,
    banco: gerarBancoFase1()
  },
  {
    nome: "Fase 2",
    explicacao: `
    <strong>Forma negativa</strong><br><br>
    Para negar o verbo to be, usamos <strong>not</strong>.<br><br>

    ‚Ä¢ I am not<br>
    ‚Ä¢ You are not<br>
    ‚Ä¢ He / She / It is not<br><br>

    Exemplo:<br>
    She is not here ‚Üí Ela n√£o est√° aqui
    `,
    banco: gerarBancoFase2()
  }
];

/* =====================
   ESTADO
===================== */
let faseAtual = 0;
let acertos = 0;
let erros = 0;
let perguntaAtual = null;

/* =====================
   FUN√á√ïES
===================== */
function falar(texto) {
  const u = new SpeechSynthesisUtterance(texto);
  u.lang = "en-US";
  speechSynthesis.speak(u);
}

function novaPergunta() {
  erros = 0;
  perguntaAtual = fases[faseAtual].banco[Math.floor(Math.random() * fases[faseAtual].banco.length)];
  renderPergunta();
}

function responder(opcao) {
  if (opcao === perguntaAtual.correta) {
    acertos++;
    falar(perguntaAtual.frase);

    app.innerHTML = `
      <div class="card">
        <h2 class="correct">‚úî Correto!</h2>
        <div class="translation">
          <strong>${perguntaAtual.frase}</strong><br>
          ${perguntaAtual.traducao}
        </div>
        <button class="primary" onclick="proximo()">Pr√≥xima</button>
      </div>
    `;
  } else {
    erros++;
    if (erros >= 3) {
      document.querySelector(".feedback").innerHTML = `
        <div class="wrong">‚ùå Resposta correta:</div>
        <div class="translation">
          <strong>${perguntaAtual.frase}</strong><br>
          ${perguntaAtual.traducao}
        </div>
      `;
    } else {
      document.querySelector(".feedback").innerHTML =
        `<div class="wrong">Tente novamente (${erros}/3)</div>`;
    }
  }
}

function proximo() {
  if (acertos >= 300) {
    telaConclusao();
  } else {
    novaPergunta();
  }
}

/* =====================
   TELAS
===================== */
function telaInicial() {
  app.innerHTML = `
    <div class="card">
      <h1>La Latina</h1>
      <h2>${fases[faseAtual].nome}</h2>
      <p>${fases[faseAtual].explicacao}</p>
      <button class="primary" onclick="novaPergunta()">Come√ßar</button>
    </div>
  `;
}

function renderPergunta() {
  app.innerHTML = `
    <div class="card">
      <h2>${perguntaAtual.pergunta}</h2>
      ${perguntaAtual.opcoes.map(o =>
        `<button class="option" onclick="responder('${o}')">${o}</button>`
      ).join("")}
      <div class="feedback"></div>
      <p style="margin-top:12px;">Acertos: ${acertos}/300</p>
    </div>
  `;
}

function telaConclusao() {
  app.innerHTML = `
    <div class="card">
      <h2>üéâ Parab√©ns!</h2>
      <p>Voc√™ concluiu a ${fases[faseAtual].nome}.</p>
      <button class="primary" onclick="faseAtual++; acertos=0; telaInicial()">Pr√≥xima fase</button>
    </div>
  `;
}

telaInicial();
</script>
</body>
</html>
