<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lalatina ‚Äì Treino</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #0f172a;
  color: #fff;
}

.container {
  max-width: 420px;
  margin: auto;
  padding: 20px;
}

.card {
  background: #020617;
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 0 20px rgba(0,0,0,0.4);
}

h1 {
  text-align: center;
  margin-bottom: 8px;
}

.status {
  text-align: center;
  font-size: 14px;
  opacity: 0.8;
}

.question {
  font-size: 24px;
  text-align: center;
  margin: 30px 0;
}

input {
  width: 100%;
  padding: 12px;
  border-radius: 8px;
  border: none;
  font-size: 16px;
}

button {
  width: 100%;
  margin-top: 10px;
  padding: 12px;
  border-radius: 8px;
  border: none;
  font-size: 16px;
  cursor: pointer;
}

.primary {
  background: #2563eb;
  color: #fff;
}

.primary:hover {
  background: #1d4ed8;
}

.secondary {
  background: #334155;
  color: #fff;
}

.feedback {
  text-align: center;
  margin-top: 10px;
  min-height: 20px;
}
</style>
</head>

<body>
<div class="container">
  <div class="card">
    <h1>Lalatina</h1>
    <div class="status" id="status">N√≠vel do usu√°rio: 1</div>

    <div class="question" id="question">Hi</div>

    <input type="text" id="answer" placeholder="Digite a tradu√ß√£o (qualquer idioma)">
    <button class="primary" onclick="submitAnswer()">Confirmar</button>
    <button class="secondary" onclick="repeatAudio()">üîä Ouvir novamente</button>

    <div class="feedback" id="feedback"></div>
  </div>
</div>

<script>
/* ======================================================
   BANCO DE PERGUNTAS (INGL√äS REAL + DIFICULDADE SUAVE)
   ====================================================== */
const questions = [
  { text: "Hi", level: 1 },
  { text: "Hello", level: 1 },
  { text: "Hey", level: 1 },
  { text: "Good morning", level: 1 },
  { text: "Thank you", level: 1 },
  { text: "Sorry", level: 1 },
  { text: "Please", level: 1 },

  { text: "How are you?", level: 2 },
  { text: "I'm fine", level: 2 },
  { text: "I'm okay", level: 2 },
  { text: "Nice to meet you", level: 2 },
  { text: "And you?", level: 2 },

  { text: "What is your name?", level: 3 },
  { text: "Where are you from?", level: 3 },
  { text: "Are you okay?", level: 3 },
  { text: "Can you help me?", level: 3 },
  { text: "I don't understand", level: 3 },

  { text: "What are you doing?", level: 4 },
  { text: "What time is it?", level: 4 },
  { text: "How was your day?", level: 4 },
  { text: "What happened?", level: 4 },

  { text: "I don't know", level: 5 },
  { text: "I'm tired", level: 5 },
  { text: "I'm busy", level: 5 },
  { text: "I like it", level: 5 },
  { text: "I don't like it", level: 5 }
];

/* ======================================================
   ESTADO DO USU√ÅRIO
   ====================================================== */
let userLevel = 1;
let currentQuestion = null;

/* ======================================================
   VOZ (SPEECH SYNTHESIS)
   ====================================================== */
function speak(text) {
  if (!window.speechSynthesis) return;
  window.speechSynthesis.cancel();
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = "en-US";
  utterance.rate = 0.9;
  speechSynthesis.speak(utterance);
}

/* ======================================================
   ALGORITMO ADAPTATIVO REAL
   ====================================================== */
function pickQuestion() {
  const pool = questions.filter(q =>
    q.level >= userLevel - 1 && q.level <= userLevel + 1
  );
  return pool[Math.floor(Math.random() * pool.length)];
}

/* ======================================================
   CARREGAR NOVA PERGUNTA
   ====================================================== */
function loadQuestion() {
  currentQuestion = pickQuestion();
  document.getElementById("question").innerText = currentQuestion.text;
  document.getElementById("status").innerText =
    "N√≠vel do usu√°rio: " + userLevel.toFixed(1);
  document.getElementById("answer").value = "";
  document.getElementById("feedback").innerText = "";

  setTimeout(() => speak(currentQuestion.text), 300);
}

/* ======================================================
   CONFIRMAR RESPOSTA
   ====================================================== */
function submitAnswer() {
  const answer = document.getElementById("answer").value.trim();
  if (!answer) {
    document.getElementById("feedback").innerText =
      "Digite alguma tradu√ß√£o üôÇ";
    return;
  }

  // resposta registrada (n√£o valida idioma)
  userLevel = Math.min(userLevel + 0.2, 5);
  document.getElementById("feedback").innerText = "‚úîÔ∏è Registrado";
  speak(currentQuestion.text);

  setTimeout(loadQuestion, 1200);
}

/* ======================================================
   OUVIR NOVAMENTE
   ====================================================== */
function repeatAudio() {
  if (currentQuestion) speak(currentQuestion.text);
}

/* ======================================================
   INICIAR
   ====================================================== */
loadQuestion();
</script>
</body>
</html>
